import{J as e,r as l,V as R,M as V,a1 as m,a3 as B,a4 as O}from"./index-BhYgv09n.js";import{e as z,u as K,F as n,L as a,a as d,D as f,b as D,c as b,d as y,I as Q,o as U,h as A,J as _}from"./moment-D3Lvf6e6.js";import{B as q}from"./Button-DCN3SsLa.js";import{u as G}from"./useAddress-kItuGIXP.js";import"./PurePanel-CDF04Tml.js";import"./SearchOutlined-Jj1tTT8a.js";import"./index-BflwN4Tk.js";import"./useIcons-Fpxwo_a8.js";import"./button-CfQ38TEp.js";function W({name:t="",placeholder:p,content:i,control:x,className:h}){const{field:c}=z({control:x,name:t,defaultValue:""});return e.jsx("div",{className:"relative w-full",children:e.jsx("textarea",{id:t,...c,className:`w-full py-4 px-5 rounded-lg font-medium transition-all border border-solid border-[#DFDFDF] resize-none min-h-[200px] focus:outline-none focus:ring-1 focus:ring-[#3F8CFF] ${h}`,placeholder:p,value:c.value,children:i})})}function oe(){const{control:t,handleSubmit:p,setValue:i,reset:x,formState:{errors:h}}=K({mode:"onChange",resolver:U(_),defaultValues:{title:"",phone:"",address:"",startDate:"",endDate:"",duration:0,districtId:0,provinceId:0,jobTypeId:0,description:"",imageJobDetails:void 0}}),[c,v]=l.useState(!1),{provinces:N,districts:F}=G(),{objJobType:S}=R(s=>s.typeReducer),T=V(),[u,w]=l.useState(),[j,J]=l.useState(),[g,M]=l.useState(),H=async s=>{w(s),i("jobTypeId",~~s.id)},k=s=>{J(s),i("provinceId",~~s.id)},E=s=>{M(s),i("districtId",~~s.id)},C=async()=>{const s=O();T(s)};l.useEffect(()=>{C()},[]);const[P,I]=l.useState([!1,!1,!1,!1]),$=s=>{I(r=>{const o=[...r];return o[s]=!0,o})},L=async s=>{try{const r={...s,startDate:s.startDate?A(s.startDate).format("YYYY-MM-DDTHH:mm:ss.ssssss"):null,endDate:s.endDate?A(s.endDate).format("YYYY-MM-DDTHH:mm:ss.ssssss"):null};if(console.log("Dá»¯ liá»‡u form:",r),await T(B(r)),P.some(o=>o)){m.error("Vui lÃ²ng táº£i láº¡i áº£nh!");return}m.success("ÄÃ£ Ä‘Äƒng bÃ i thÃ nh cÃ´ng!"),x(),v(!0)}catch(r){m.error("ÄÄƒng bÃ i tháº¥t báº¡i!"),console.error("Add error:",r)}};return l.useEffect(()=>{c&&v(!1)},[c]),l.useEffect(()=>{var r;const s=Object.values(h);s.length>0&&m.error((r=s[0])==null?void 0:r.message)},[h]),console.log("ğŸš€ ~ useEffect ~ arrErrors:",Object.values(h)),e.jsx("div",{className:"py-20 px-[72px]",children:e.jsxs("div",{className:"bg-white py-4 shadow-md px-11 rounded-xl",children:[e.jsx("div",{className:"mb-5 py-10",children:e.jsx("div",{children:e.jsx("h1",{className:"text-[40px] font-semibold capitalize",children:"ÄÄƒng bÃ i á»©ng tuyá»ƒn"})})}),e.jsxs("form",{onSubmit:p(L),children:[e.jsx("div",{className:"mb-5 lg:mb-10",children:e.jsxs(n,{children:[e.jsx(a,{htmlFor:"title",children:"TiÃªu Ä‘á» á»©ng tuyá»ƒn"}),e.jsx(d,{name:"title",placeholder:"Nháº­p tiÃªu Ä‘á»",control:t})]})}),e.jsxs("div",{className:"form-layout-col4",children:[e.jsx("div",{className:"col-span-1",children:e.jsxs(n,{children:[e.jsx(a,{htmlFor:"startDate",children:"NgÃ y báº¯t Ä‘áº§u"}),e.jsx(d,{type:"date",dateFormat:"YYYY-MM-DDTHH:mm:ss.ssssss",name:"startDate",placeholder:"Nháº­p ngÃ y báº¯t Ä‘áº§u",control:t})]})}),e.jsx("div",{className:"col-span-1",children:e.jsxs(n,{children:[e.jsx(a,{htmlFor:"endDate",children:"NgÃ y káº¿t thÃºc"}),e.jsx(d,{type:"date",dateFormat:"YYYY-MM-DDTHH:mm:ss.ssssss",name:"endDate",placeholder:"Nháº­p ngÃ y káº¿t thÃºc",control:t})]})}),e.jsx("div",{className:"col-span-2",children:e.jsxs(n,{children:[e.jsx(a,{htmlFor:"duration",children:"Khoáº£ng thá»i gian"}),e.jsx(d,{type:"number",name:"duration",min:0,placeholder:"Nháº­p khoáº£ng thá»i gian",control:t})]})})]}),e.jsxs("div",{className:"form-layout",children:[e.jsxs(n,{children:[e.jsx(a,{htmlFor:"phone",children:"Sá»‘ Ä‘iá»‡n thoáº¡i"}),e.jsx(d,{type:"tel",name:"phone",placeholder:"Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i",control:t})]}),e.jsxs(n,{children:[e.jsx(a,{children:"Loáº¡i cÃ´ng viá»‡c"}),e.jsxs(f,{children:[e.jsx(D,{value:`${(u==null?void 0:u.name)||"Loáº¡i cÃ´ng viá»‡c"}`}),e.jsx(b,{children:(Array.isArray(S)?S:[]).map(s=>e.jsx(y,{name:"jobTypeId",onClick:()=>H(s),children:s.name},s.id))})]})]})]}),e.jsxs("div",{className:"form-layout-col4",children:[e.jsx("div",{className:"col-span-2",children:e.jsxs(n,{children:[e.jsx(a,{htmlFor:"address",children:"Äá»‹a chá»‰"}),e.jsx(d,{name:"address",placeholder:"Nháº­p Ä‘á»‹a chá»‰, tÃªn Ä‘Æ°á»ng",control:t})]})}),e.jsx("div",{className:"col-span-1",children:e.jsxs(n,{children:[e.jsx(a,{children:"Tá»‰nh / ThÃ nh phá»‘"}),e.jsxs(f,{children:[e.jsx(D,{value:`${(j==null?void 0:j.name)||"Tá»‰nh / ThÃ nh phá»‘"}`}),e.jsx(b,{children:(Array.isArray(N)?N:[]).map(s=>e.jsx(y,{name:"provinceId",onClick:()=>k(s),children:s.name},s.id))})]})]})}),e.jsx("div",{className:"col-span-1",children:e.jsxs(n,{children:[e.jsx(a,{children:"Quáº­n / Huyá»‡n"}),e.jsxs(f,{children:[e.jsx(D,{value:`${(g==null?void 0:g.name)||"Quáº­n / Huyá»‡n"}`}),e.jsx(b,{children:(Array.isArray(F)?F:[]).map(s=>e.jsx(y,{name:"districtId",onClick:()=>E(s),children:s.name},s.id))})]})]})})]}),e.jsxs("div",{className:"mt-24",children:[e.jsx(a,{htmlFor:"",children:"Táº£i áº£nh vá» cÃ´ng viá»‡c vÃ  nÆ¡i lÃ m viá»‡c"}),e.jsx("div",{className:"border border-solid border-[#D5D5D5] rounded-3xl p-4 mt-10 mb-20",children:e.jsx("div",{className:"grid grid-cols-2 gap-6",children:Array.from({length:4},(s,r)=>e.jsx(Q,{name:`imageJobDetails${r+1}`,onFileSelect:o=>{o?(i(`imageJobDetails.${r+1}`,{file:o}),I(Y=>(Y[r]=!1,Y))):console.error("KhÃ´ng cÃ³ tá»‡p nÃ o Ä‘Æ°á»£c chá»n")},resetTrigger:c,onRemove:()=>$(r)},`imageJobDetails${r+1}`))})})]}),e.jsx("div",{children:e.jsxs(n,{children:[e.jsx(a,{htmlFor:"description",children:"MÃ´ táº£"}),e.jsx(W,{name:"description",control:t,placeholder:"MÃ´ táº£ ..."})]})}),e.jsx(q,{type:"submit",title:"ÄÄƒng BÃ i",className:"w-full mt-10"})]})]})})}export{oe as default};
