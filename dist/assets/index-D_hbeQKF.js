import{J as e,r as o,V as $,M as B,a1 as p,a8 as O,a9 as z}from"./index-BeQlJR95.js";import{u as K,a as Q,F as n,b as d,I as U,o as _,d as Y,J as q}from"./validation-W-AJkoN-.js";import{L as t,D as g,a as f,b as D,c as v}from"./DropdownOption-BmkwE8kL.js";import{B as G}from"./Button-BX7Gi0T5.js";import{u as W}from"./useAddress-R4AUV3Ew.js";import"./PurePanel-CIh_lgZS.js";import"./Overflow-BkX-fNIH.js";import"./index-ByvNsjJK.js";import"./useIcons-BJgL_ZMb.js";import"./SearchOutlined-6qZQ3b3d.js";import"./button-zC0Tjhov.js";function X({name:a="",placeholder:x,content:l,control:u,className:h}){const{field:c}=K({control:u,name:a,defaultValue:""});return e.jsx("div",{className:"relative w-full",children:e.jsx("textarea",{id:a,...c,className:`w-full py-4 px-5 rounded-lg font-medium transition-all border border-solid border-[#DFDFDF] resize-none min-h-[200px] focus:outline-none focus:ring-1 focus:ring-[#3F8CFF] ${h}`,placeholder:x,value:c.value,children:l})})}function de(){const{control:a,handleSubmit:x,setValue:l,reset:u,formState:{errors:h}}=Q({mode:"onChange",resolver:_(q),defaultValues:{title:"",phone:"",address:"",startDate:"",endDate:"",duration:0,districtId:0,provinceId:0,jobTypeId:0,description:"",imageJobDetails:void 0}}),[c,b]=o.useState(!1),{provinces:w,districts:J,setProvinceAndFetchDistricts:M}=W(),{objJobType:y}=$(s=>s.typeReducer),S=B(),[j,A]=o.useState(),[N,H]=o.useState(),[m,F]=o.useState(),P=async s=>{A(s),l("jobTypeId",~~s.id)},E=s=>{H(s),l("provinceId",~~s.id),F(void 0),M(s.id)},k=s=>{F(s),l("districtId",~~s.id)},C=async()=>{const s=z();S(s)};o.useEffect(()=>{C()},[]);const[L,T]=o.useState([!1,!1,!1,!1]),R=s=>{T(r=>{const i=[...r];return i[s]=!0,i})},V=async s=>{try{const r={...s,startDate:s.startDate?Y(s.startDate).format("YYYY-MM-DDTHH:mm:ss.SSSSSS"):null,endDate:s.endDate?Y(s.endDate).format("YYYY-MM-DDTHH:mm:ss.SSSSSS"):null};if(await S(O(r)),L.some(i=>i)){p.error("Vui lÃ²ng táº£i láº¡i áº£nh!");return}p.success("ÄÃ£ Ä‘Äƒng bÃ i thÃ nh cÃ´ng!"),u(),b(!0)}catch(r){p.error("ÄÄƒng bÃ i tháº¥t báº¡i!"),console.error("Add error:",r)}};return o.useEffect(()=>{c&&b(!1)},[c]),o.useEffect(()=>{var r;const s=Object.values(h);s.length>0&&p.error((r=s[0])==null?void 0:r.message)},[h]),console.log("ğŸš€ ~ useEffect ~ arrErrors:",Object.values(h)),e.jsx("div",{className:"py-20 px-[72px]",children:e.jsxs("div",{className:"bg-white py-4 shadow-md px-11 rounded-xl",children:[e.jsx("div",{className:"mb-5 py-10",children:e.jsx("div",{children:e.jsx("h1",{className:"text-[40px] font-semibold capitalize",children:"ÄÄƒng bÃ i á»©ng tuyá»ƒn"})})}),e.jsxs("form",{onSubmit:x(V),children:[e.jsx("div",{className:"mb-5 lg:mb-10",children:e.jsxs(n,{children:[e.jsx(t,{htmlFor:"title",children:"TiÃªu Ä‘á» á»©ng tuyá»ƒn"}),e.jsx(d,{name:"title",placeholder:"Nháº­p tiÃªu Ä‘á»",control:a})]})}),e.jsxs("div",{className:"form-layout-col4",children:[e.jsx("div",{className:"col-span-1",children:e.jsxs(n,{children:[e.jsx(t,{htmlFor:"startDate",children:"NgÃ y báº¯t Ä‘áº§u"}),e.jsx(d,{type:"date",dateFormat:"YYYY-MM-DDTHH:mm:ss.ssssss",name:"startDate",placeholder:"Nháº­p ngÃ y báº¯t Ä‘áº§u",control:a})]})}),e.jsx("div",{className:"col-span-1",children:e.jsxs(n,{children:[e.jsx(t,{htmlFor:"endDate",children:"NgÃ y káº¿t thÃºc"}),e.jsx(d,{type:"date",dateFormat:"YYYY-MM-DDTHH:mm:ss.ssssss",name:"endDate",placeholder:"Nháº­p ngÃ y káº¿t thÃºc",control:a})]})}),e.jsx("div",{className:"col-span-2",children:e.jsxs(n,{children:[e.jsx(t,{htmlFor:"duration",children:"Khoáº£ng thá»i gian"}),e.jsx(d,{type:"number",name:"duration",min:0,placeholder:"Nháº­p khoáº£ng thá»i gian",control:a})]})})]}),e.jsxs("div",{className:"form-layout",children:[e.jsxs(n,{children:[e.jsx(t,{htmlFor:"phone",children:"Sá»‘ Ä‘iá»‡n thoáº¡i"}),e.jsx(d,{type:"tel",name:"phone",placeholder:"Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i",control:a})]}),e.jsxs(n,{children:[e.jsx(t,{children:"Loáº¡i cÃ´ng viá»‡c"}),e.jsxs(g,{children:[e.jsx(f,{value:`${(j==null?void 0:j.name)||"Loáº¡i cÃ´ng viá»‡c"}`}),e.jsx(D,{children:(Array.isArray(y)?y:[]).map(s=>e.jsx(v,{name:"jobTypeId",onClick:()=>P(s),children:s.name},s.id))})]})]})]}),e.jsxs("div",{className:"form-layout-col4",children:[e.jsx("div",{className:"col-span-2",children:e.jsxs(n,{children:[e.jsx(t,{htmlFor:"address",children:"Äá»‹a chá»‰"}),e.jsx(d,{name:"address",placeholder:"Nháº­p Ä‘á»‹a chá»‰, tÃªn Ä‘Æ°á»ng",control:a})]})}),e.jsx("div",{className:"col-span-1",children:e.jsxs(n,{children:[e.jsx(t,{children:"Tá»‰nh / ThÃ nh phá»‘"}),e.jsxs(g,{children:[e.jsx(f,{value:N?N.name:"Tá»‰nh / ThÃ nh phá»‘"}),e.jsx(D,{children:w.map(s=>e.jsx(v,{name:"provinceId",onClick:()=>E(s),children:s.name},s.id))})]})]})}),e.jsx("div",{className:"col-span-1",children:e.jsxs(n,{children:[e.jsx(t,{children:"Quáº­n / Huyá»‡n"}),e.jsxs(g,{children:[e.jsx(f,{value:m?m==null?void 0:m.name:"Quáº­n / Huyá»‡n"}),e.jsx(D,{children:J.map(s=>e.jsx(v,{name:"districtId",onClick:()=>k(s),children:s.name},s.id))})]})]})})]}),e.jsxs("div",{className:"mt-24",children:[e.jsx(t,{htmlFor:"",children:"Táº£i áº£nh vá» cÃ´ng viá»‡c vÃ  nÆ¡i lÃ m viá»‡c"}),e.jsx("div",{className:"border border-solid border-[#D5D5D5] rounded-3xl p-4 mt-10 mb-20",children:e.jsx("div",{className:"grid grid-cols-2 gap-6",children:Array.from({length:4},(s,r)=>e.jsx(U,{name:`imageJobDetails${r+1}`,onFileSelect:i=>{i?(l(`imageJobDetails.${r+1}`,{file:i}),T(I=>(I[r]=!1,I))):console.error("KhÃ´ng cÃ³ tá»‡p nÃ o Ä‘Æ°á»£c chá»n")},resetTrigger:c,onRemove:()=>R(r)},`imageJobDetails${r+1}`))})})]}),e.jsx("div",{children:e.jsxs(n,{children:[e.jsx(t,{htmlFor:"description",children:"MÃ´ táº£"}),e.jsx(X,{name:"description",control:a,placeholder:"MÃ´ táº£ ..."})]})}),e.jsx(G,{type:"submit",title:"ÄÄƒng BÃ i",className:"w-full mt-10"})]})]})})}export{de as default};
